<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui" xmlns:f="http://xmlns.jcp.org/jsf/core">

<h:head>
  <title>Liste des Medecins</title>
</h:head>

<h:body>

  <h:form id="form">
  <p:growl id="msgs" showDetail="true"/>


    <p:dataTable id="medecins" var="medecin" value="#{medecinView.medecins}" editable="true" editMode="cell" widgetVar="cellMedecin">
      <f:facet name="header">
        Modification direct par Cellule
      </f:facet>

      <p:ajax event="cellEdit" listener="#{medecinView.onCellEdit}" update=":form:msgs" />

      <p:column headerText="Id">
        <p:cellEditor>
          <f:facet name="output"><h:outputText value="#{medecin.id}" /></f:facet>
          <f:facet name="input"><p:inputText id="modelInput" value="#{medecin.id}" style="width:96%"/></f:facet>
        </p:cellEditor>
      </p:column>

      <p:column headerText="Matricule">
        <p:cellEditor>
          <f:facet name="output"><h:outputText value="#{medecin.matricule}" /></f:facet>
          <f:facet name="input"><p:inputText value="#{medecin.matricule}" style="width:96%" label="Matricule"/></f:facet>
        </p:cellEditor>
      </p:column>

      <p:column headerText="Nom">
        <p:cellEditor>
          <f:facet name="output"><h:outputText value="#{medecin.nom}" /></f:facet>
          <f:facet name="input"><p:inputText value="#{medecin.nom}" style="width:96%" label="Nom"/></f:facet>
        </p:cellEditor>
      </p:column>

      <p:column headerText="Prenom">
        <p:cellEditor>
          <f:facet name="output"><h:outputText value="#{medecin.prenom}" /></f:facet>
          <f:facet name="input"><p:inputText value="#{medecin.prenom}" style="width:96%" label="Prenom"/></f:facet>
        </p:cellEditor>
      </p:column>

      <p:column headerText="Telephone">
        <p:cellEditor>
          <f:facet name="output"><h:outputText value="#{medecin.tel}" /></f:facet>
          <f:facet name="input"><p:inputText value="#{medecin.tel}" style="width:96%" label="Telephone"/></f:facet>
        </p:cellEditor>
      </p:column>

      <p:column headerText="Adresse">
        <p:cellEditor>
          <f:facet name="output"><h:outputText value="#{medecin.adresse}" /></f:facet>
          <f:facet name="input"><p:inputText value="#{medecin.adresse}" style="width:96%" label="Adresse"/></f:facet>
        </p:cellEditor>
      </p:column>

      <p:column headerText="Email">
        <p:cellEditor>
          <f:facet name="output"><h:outputText value="#{medecin.email}" /></f:facet>
          <f:facet name="input"><p:inputText value="#{medecin.email}" style="width:96%" label="Email"/></f:facet>
        </p:cellEditor>
      </p:column>

      <p:column headerText="Date de Naissance">
        <p:cellEditor>
          <f:facet name="output"><h:outputText value="#{medecin.datenaissance}" /></f:facet>
          <f:facet name="input"><p:inputText value="#{medecin.datenaissance}" style="width:96%" label="Date de Naissance"/></f:facet>
        </p:cellEditor>
      </p:column>

      <p:column headerText="Salaire">
        <p:cellEditor>
          <f:facet name="output"><h:outputText value="#{medecin.salaire}" /></f:facet>
          <f:facet name="input"><p:inputText value="#{medecin.salaire}" style="width:96%" label="Salaire"/></f:facet>
        </p:cellEditor>
      </p:column>

      <p:column headerText="Service">
        <p:cellEditor>
          <f:facet name="output"><h:outputText value="#{medecin.service}" /></f:facet>
          <f:facet name="input">
            <h:selectOneMenu value="#{medecinView.medecin.service}" style="width:100%">
              <f:selectItems value="#{medecinView.services}" var="s" itemLabel="#{s.libelle}" itemValue="#{s.id}" />
            </h:selectOneMenu>
          </f:facet>
        </p:cellEditor>
      </p:column>

      <p:column headerText="Specialiste">
        <p:cellEditor>
          <f:facet name="output"><h:outputText value="#{medecin.specialites}" /></f:facet>
          <f:facet name="input">
            <h:selectManyMenu value="#{medecinView.selectedSpecialites}" style="width:100%">
              <f:selectItems value="#{medecinView.specialites}" var="sp" itemLabel="#{sp.libelle}" itemValue="#{sp}" />
            </h:selectManyMenu>
          </f:facet>
        </p:cellEditor>
      </p:column>

      <p:column headerText="">
        <p:commandButton action="#{medecinView.edit(medecin)}" value="Edit" />
      </p:column>
      <p:column headerText="">
        <p:commandButton action="#{medecinView.editService(medecin)}" value="EditService" />
      </p:column>
      <p:column headerText="">
        <p:commandButton action="#{medecinView.addSpecialite(medecin)}" value="EditSpecialite" />
      </p:column>

    </p:dataTable>

    <p:contextMenu for="medecins" widgetVar="cMenu">
      <p:menuitem value="Edit Cell" icon="pi pi-search" onclick="PF('cellMedecin').showCellEditor();return false;"/>
      <p:menuitem value="Hide Menu" icon="pi pi-times" onclick="PF('cMenu').hide()"/>
    </p:contextMenu>
  </h:form>
</h:body>
</html>
